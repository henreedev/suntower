[gd_scene load_steps=31 format=3 uid="uid://dmtd1mxporvjw"]

[ext_resource type="Script" path="res://scenes/environment/tower.gd" id="2_bq5o6"]
[ext_resource type="Script" path="res://scenes/environment/Lights.gd" id="3_6s52w"]
[ext_resource type="PackedScene" uid="uid://bdaadwkyt65ag" path="res://scenes/environment/sun_rays.tscn" id="3_075b6"]
[ext_resource type="Texture2D" uid="uid://d2cieoughn5nu" path="res://assets/image/environment/bg.png" id="3_a67q3"]
[ext_resource type="Script" path="res://scenes/environment/ParallaxBackground.gd" id="3_iw85s"]
[ext_resource type="Texture2D" uid="uid://cm88pnpk4lv5y" path="res://assets/image/environment/gwj66-trees.png" id="4_2s5cd"]
[ext_resource type="Shader" path="res://scenes/environment/bigclouds.gdshader" id="5_lbjnr"]
[ext_resource type="Texture2D" uid="uid://cg7jutptx5j3u" path="res://assets/image/environment/huge-clouds.png" id="6_ifl30"]
[ext_resource type="Texture2D" uid="uid://c7e11237n0hy6" path="res://assets/image/environment/small-clouds.png" id="6_vk0hv"]
[ext_resource type="Script" path="res://scenes/environment/clouds.gd" id="7_dv22i"]
[ext_resource type="Texture2D" uid="uid://d0r7row0y7nes" path="res://assets/image/environment/big-clouds.png" id="8_vofri"]
[ext_resource type="PackedScene" uid="uid://cxiyhj8bmeppa" path="res://scenes/environment/level-chunks/sun/sun_chunk_1.tscn" id="11_uwevu"]
[ext_resource type="PackedScene" uid="uid://c66ux8dtsf1vd" path="res://scenes/environment/level-chunks/storm/storm_chunk_1.tscn" id="12_effwr"]
[ext_resource type="PackedScene" uid="uid://bmodcpfd7ap0y" path="res://scenes/environment/level-chunks/sun/tutorial_chunk.tscn" id="12_ihp26"]
[ext_resource type="PackedScene" uid="uid://dvdi8qi1lsl6c" path="res://scenes/environment/level-chunks/wind/wind_chunk_1.tscn" id="13_cl4ft"]
[ext_resource type="PackedScene" uid="uid://ca4fvc73x8ydq" path="res://scenes/environment/wind_burst_area.tscn" id="13_ptelv"]
[ext_resource type="PackedScene" uid="uid://dh7b3um8nnq1j" path="res://scenes/environment/level-chunks/peaceful/peaceful_chunk_1.tscn" id="14_ne0fo"]
[ext_resource type="PackedScene" uid="uid://dx72kt582x8cg" path="res://scenes/environment/level-chunks/peaceful/peaceful_chunk_end.tscn" id="17_n405p"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_ivn7p"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_41ibw"]
shader = ExtResource("5_lbjnr")
shader_parameter/scroll_offset = 0.0
shader_parameter/brightness = 1.0

[sub_resource type="ShaderMaterial" id="ShaderMaterial_m5nt1"]
shader = ExtResource("5_lbjnr")
shader_parameter/scroll_offset = -0.05
shader_parameter/brightness = 1.0

[sub_resource type="ShaderMaterial" id="ShaderMaterial_xdns3"]
shader = ExtResource("5_lbjnr")
shader_parameter/scroll_offset = -0.05
shader_parameter/brightness = 1.0

[sub_resource type="RectangleShape2D" id="RectangleShape2D_1ol0a"]
size = Vector2(454, 1361)

[sub_resource type="Gradient" id="Gradient_oqbjg"]
interpolation_mode = 2
offsets = PackedFloat32Array(0.318182, 1)
colors = PackedColorArray(0, 0, 0, 1, 0, 1, 1, 0)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_30wd8"]
gradient = SubResource("Gradient_oqbjg")
width = 129
height = 149
fill_from = Vector2(0.5, 0.444278)
fill_to = Vector2(0.5, 0.848684)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_kmt2p"]
polygon = PackedVector2Array(-166.935, -2726, 167.065, -2726, 167.065, -2727, -166.935, -2727)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_5g0xp"]
size = Vector2(453, 2154)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_gn4dx"]
size = Vector2(78.0001, 19.0001)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_j7jso"]
size = Vector2(452.999, 1447.9)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_bd455"]
polygon = PackedVector2Array(-166.935, -2726, 167.065, -2726, 167.065, -2727, -166.935, -2727)

[node name="Tower" type="Node2D" groups=["tower"]]
material = SubResource("ShaderMaterial_ivn7p")
rotation = -2.37417e-05
script = ExtResource("2_bq5o6")

[node name="CanvasModulate" type="CanvasModulate" parent="."]
color = Color(0.88644, 0.89, 0.8722, 1)

[node name="ParallaxBackground" type="ParallaxBackground" parent="."]
script = ExtResource("3_iw85s")

[node name="Background" type="ParallaxLayer" parent="ParallaxBackground"]
motion_scale = Vector2(1, 0.065)
motion_offset = Vector2(-192, 242)
motion_mirroring = Vector2(0, 648)
metadata/_edit_group_ = true

[node name="Sprite2D" type="Sprite2D" parent="ParallaxBackground/Background"]
show_behind_parent = true
texture = ExtResource("3_a67q3")
centered = false

[node name="Forest" type="ParallaxLayer" parent="ParallaxBackground"]
motion_scale = Vector2(1, 0.13)
motion_offset = Vector2(-207.495, -215.25)
motion_mirroring = Vector2(384, 0)

[node name="Sprite2D" type="Sprite2D" parent="ParallaxBackground/Forest"]
texture = ExtResource("4_2s5cd")
centered = false

[node name="ThickClouds" type="ParallaxLayer" parent="ParallaxBackground"]
motion_scale = Vector2(1, 0.03)
motion_offset = Vector2(-192, 82.125)
motion_mirroring = Vector2(384, 0)

[node name="Sprite2D" type="Sprite2D" parent="ParallaxBackground/ThickClouds"]
modulate = Color(1, 1, 1, 0)
material = SubResource("ShaderMaterial_41ibw")
texture = ExtResource("6_ifl30")
script = ExtResource("7_dv22i")

[node name="SmallClouds" type="ParallaxLayer" parent="ParallaxBackground"]
motion_scale = Vector2(1, 0.11)
motion_offset = Vector2(-192, -22.64)
motion_mirroring = Vector2(384, 0)

[node name="Sprite2D" type="Sprite2D" parent="ParallaxBackground/SmallClouds"]
material = SubResource("ShaderMaterial_m5nt1")
texture = ExtResource("6_vk0hv")
script = ExtResource("7_dv22i")

[node name="BigClouds" type="ParallaxLayer" parent="ParallaxBackground"]
motion_scale = Vector2(1, 0.35)
motion_offset = Vector2(-192, -128.47)
motion_mirroring = Vector2(384, 0)

[node name="Sprite2D" type="Sprite2D" parent="ParallaxBackground/BigClouds"]
material = SubResource("ShaderMaterial_xdns3")
texture = ExtResource("8_vofri")
script = ExtResource("7_dv22i")

[node name="Lights" type="Node2D" parent="." groups=["lights"]]
rotation = 1.18682
script = ExtResource("3_6s52w")

[node name="DirectionalLight2D" type="DirectionalLight2D" parent="Lights"]
color = Color(1, 0.662745, 0.611765, 1)
energy = 4.5
shadow_enabled = true
shadow_color = Color(0, 0, 0, 1)

[node name="DirectionalLight2D2" type="DirectionalLight2D" parent="Lights"]
rotation = 0.0174533
color = Color(0.670588, 0, 0.745098, 1)
energy = 0.25
shadow_enabled = true

[node name="DirectionalLight2D3" type="DirectionalLight2D" parent="Lights"]
rotation = -0.0174533
color = Color(0, 0, 1, 1)
energy = 0.15
shadow_enabled = true

[node name="SunRays" parent="." instance=ExtResource("3_075b6")]
position = Vector2(-180, 0)

[node name="SunRays2" parent="." instance=ExtResource("3_075b6")]
position = Vector2(180, 0)

[node name="LevelChunks" type="Node2D" parent="."]

[node name="Sun" type="Node2D" parent="LevelChunks"]

[node name="SunChunk1" parent="LevelChunks/Sun" instance=ExtResource("11_uwevu")]

[node name="TutorialChunk" parent="LevelChunks/Sun" instance=ExtResource("12_ihp26")]
position = Vector2(0, 592)

[node name="Storm" type="Node2D" parent="LevelChunks"]

[node name="StormChunk1" parent="LevelChunks/Storm" instance=ExtResource("12_effwr")]

[node name="StormArea" type="Area2D" parent="LevelChunks/Storm"]
monitorable = false
metadata/_edit_group_ = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="LevelChunks/Storm/StormArea"]
position = Vector2(0.0485694, -2045.5)
shape = SubResource("RectangleShape2D_1ol0a")
debug_color = Color(0.627451, 0.27451, 1, 0)

[node name="StormCover" type="Polygon2D" parent="LevelChunks/Storm/StormArea"]
visible = false
texture_repeat = 3
texture = SubResource("GradientTexture2D_30wd8")
polygon = PackedVector2Array(-176, -1369, -167, -1366, 167, -1366, 176, -1375, 176, -1522, -176, -1522)

[node name="LightOccluder2D" type="LightOccluder2D" parent="LevelChunks/Storm/StormArea"]
position = Vector2(0, 1361)
occluder = SubResource("OccluderPolygon2D_kmt2p")

[node name="LightningStriker" type="Node" parent="LevelChunks/Storm"]
unique_name_in_owner = true

[node name="StopDelayTimer" type="Timer" parent="LevelChunks/Storm/LightningStriker"]
unique_name_in_owner = true
wait_time = 0.349
one_shot = true

[node name="Wind" type="Node2D" parent="LevelChunks"]

[node name="WindChunk1" parent="LevelChunks/Wind" instance=ExtResource("13_cl4ft")]

[node name="WindBursts" type="Node2D" parent="LevelChunks/Wind/WindChunk1"]

[node name="WindBurstArea" parent="LevelChunks/Wind/WindChunk1/WindBursts" instance=ExtResource("13_ptelv")]
position = Vector2(0.067, -2772.27)
scale = Vector2(1, 0.03)
burst_direction = 1
burst_overall_duration = 1.0
disable_duration = 0

[node name="WindBurstArea2" parent="LevelChunks/Wind/WindChunk1/WindBursts" instance=ExtResource("13_ptelv")]
position = Vector2(0.067, -2963.58)
scale = Vector2(1, 0.07)
burst_overall_duration = 1.0
disable_duration = 0

[node name="WindBurstArea3" parent="LevelChunks/Wind/WindChunk1/WindBursts" instance=ExtResource("13_ptelv")]
position = Vector2(0.067, -3126.89)
scale = Vector2(1, 0.07)
burst_direction = 1
burst_overall_duration = 1.0
disable_duration = 0

[node name="WindBurstArea4" parent="LevelChunks/Wind/WindChunk1/WindBursts" instance=ExtResource("13_ptelv")]
position = Vector2(0.067, -3273.89)
scale = Vector2(1, 0.07)
burst_overall_duration = 1.0
disable_duration = 0

[node name="WindBurstArea5" parent="LevelChunks/Wind/WindChunk1/WindBursts" instance=ExtResource("13_ptelv")]
position = Vector2(0.067, -3461.66)
scale = Vector2(1, 0.07)
burst_direction = 1
burst_overall_duration = 1.0
disable_duration = 0

[node name="WindBurstArea6" parent="LevelChunks/Wind/WindChunk1/WindBursts" instance=ExtResource("13_ptelv")]
position = Vector2(0.067, -3718.5)
scale = Vector2(1, 0.07)
burst_overall_duration = 1.0
disable_duration = 0

[node name="WindBurstArea7" parent="LevelChunks/Wind/WindChunk1/WindBursts" instance=ExtResource("13_ptelv")]
position = Vector2(0.067, -4036.44)
scale = Vector2(1, 0.07)
burst_direction = 1
burst_overall_duration = 1.0
disable_duration = 0

[node name="WindBurstArea8" parent="LevelChunks/Wind/WindChunk1/WindBursts" instance=ExtResource("13_ptelv")]
position = Vector2(0.067, -4292.65)
scale = Vector2(1, 0.07)
burst_overall_duration = 1.0
disable_duration = 0

[node name="WindBurstArea9" parent="LevelChunks/Wind/WindChunk1/WindBursts" instance=ExtResource("13_ptelv")]
position = Vector2(0.067, -4530.06)
scale = Vector2(1, 0.07)
burst_direction = 1
burst_overall_duration = 1.0
disable_duration = 0

[node name="WindBurstArea10" parent="LevelChunks/Wind/WindChunk1/WindBursts" instance=ExtResource("13_ptelv")]
position = Vector2(0.067, -4755.58)
scale = Vector2(1, 0.07)
burst_overall_duration = 1.0
disable_duration = 0

[node name="WindArea" type="Area2D" parent="LevelChunks/Wind"]
unique_name_in_owner = true
position = Vector2(3, 7.12251e-05)
monitorable = false
gravity_point_center = Vector2(1, 0)
gravity_direction = Vector2(1, 0)
metadata/_edit_group_ = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="LevelChunks/Wind/WindArea"]
position = Vector2(-0.426628, -3805)
shape = SubResource("RectangleShape2D_5g0xp")
debug_color = Color(0.282353, 0.27451, 0.282353, 0)

[node name="LightOccluder2D" type="LightOccluder2D" parent="LevelChunks/Wind/WindArea"]
position = Vector2(-2.37417e-05, 1)
occluder = SubResource("OccluderPolygon2D_kmt2p")

[node name="Peaceful" type="Node2D" parent="LevelChunks"]

[node name="PeacefulChunk1" parent="LevelChunks/Peaceful" instance=ExtResource("14_ne0fo")]
position = Vector2(0, -1600)

[node name="PeacefulChunkEnd" parent="LevelChunks/Peaceful" instance=ExtResource("17_n405p")]
position = Vector2(0, -1600)

[node name="CamMaxMarker" type="Marker2D" parent="LevelChunks/Peaceful/PeacefulChunkEnd"]
unique_name_in_owner = true
position = Vector2(0.145489, -4528)

[node name="VictoryArea" type="Area2D" parent="LevelChunks/Peaceful/PeacefulChunkEnd"]
position = Vector2(0.017, -1371)
monitorable = false
gravity_point_center = Vector2(1, 0)
gravity_direction = Vector2(1, 0)
metadata/_edit_group_ = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="LevelChunks/Peaceful/PeacefulChunkEnd/VictoryArea"]
position = Vector2(0.0747312, -3168.5)
shape = SubResource("RectangleShape2D_gn4dx")
debug_color = Color(0.45098, 0, 0.254902, 0)

[node name="DisableOccludersMarker" type="Marker2D" parent="LevelChunks/Peaceful/PeacefulChunkEnd"]
unique_name_in_owner = true
position = Vector2(0.281, -4284)

[node name="PeacefulArea" type="Area2D" parent="LevelChunks/Peaceful"]
position = Vector2(0.0172127, -2331.1)
monitorable = false
gravity_point_center = Vector2(1, 0)
gravity_direction = Vector2(1, 0)

[node name="CollisionShape2D" type="CollisionShape2D" parent="LevelChunks/Peaceful/PeacefulArea"]
position = Vector2(-0.430507, -3267.95)
shape = SubResource("RectangleShape2D_j7jso")
debug_color = Color(0.92549, 0.521569, 0.32549, 0)

[node name="LightOccluder2D" type="LightOccluder2D" parent="LevelChunks/Peaceful/PeacefulArea"]
position = Vector2(0, 188)
occluder = SubResource("OccluderPolygon2D_bd455")

[node name="StartHeightMarker" type="Marker2D" parent="."]
unique_name_in_owner = true
position = Vector2(-0.0142213, 599)

[node name="ShowCloudsMarker" type="Marker2D" parent="."]
unique_name_in_owner = true
position = Vector2(-21.9953, -199.001)

[connection signal="body_entered" from="LevelChunks/Storm/StormArea" to="." method="_on_storm_area_body_entered"]
[connection signal="body_exited" from="LevelChunks/Storm/StormArea" to="." method="_on_storm_area_body_exited"]
[connection signal="timeout" from="LevelChunks/Storm/LightningStriker/StopDelayTimer" to="." method="_on_stop_delay_timer_timeout"]
[connection signal="body_exited" from="LevelChunks/Wind/WindChunk1/WindBursts/WindBurstArea" to="." method="_on_wind_burst_area_body_exited"]
[connection signal="body_exited" from="LevelChunks/Wind/WindChunk1/WindBursts/WindBurstArea2" to="." method="_on_wind_burst_area_body_exited"]
[connection signal="body_exited" from="LevelChunks/Wind/WindChunk1/WindBursts/WindBurstArea3" to="." method="_on_wind_burst_area_body_exited"]
[connection signal="body_exited" from="LevelChunks/Wind/WindChunk1/WindBursts/WindBurstArea4" to="." method="_on_wind_burst_area_body_exited"]
[connection signal="body_exited" from="LevelChunks/Wind/WindChunk1/WindBursts/WindBurstArea5" to="." method="_on_wind_burst_area_body_exited"]
[connection signal="body_exited" from="LevelChunks/Wind/WindChunk1/WindBursts/WindBurstArea6" to="." method="_on_wind_burst_area_body_exited"]
[connection signal="body_exited" from="LevelChunks/Wind/WindChunk1/WindBursts/WindBurstArea7" to="." method="_on_wind_burst_area_body_exited"]
[connection signal="body_exited" from="LevelChunks/Wind/WindChunk1/WindBursts/WindBurstArea8" to="." method="_on_wind_burst_area_body_exited"]
[connection signal="body_exited" from="LevelChunks/Wind/WindChunk1/WindBursts/WindBurstArea9" to="." method="_on_wind_burst_area_body_exited"]
[connection signal="body_exited" from="LevelChunks/Wind/WindChunk1/WindBursts/WindBurstArea10" to="." method="_on_wind_burst_area_body_exited"]
[connection signal="body_entered" from="LevelChunks/Wind/WindArea" to="." method="_on_wind_area_body_entered"]
[connection signal="body_exited" from="LevelChunks/Wind/WindArea" to="." method="_on_wind_area_body_exited"]
[connection signal="body_entered" from="LevelChunks/Peaceful/PeacefulChunkEnd/VictoryArea" to="." method="_on_victory_area_body_entered"]
[connection signal="body_entered" from="LevelChunks/Peaceful/PeacefulArea" to="." method="_on_peaceful_area_body_entered"]
[connection signal="body_exited" from="LevelChunks/Peaceful/PeacefulArea" to="." method="_on_peaceful_area_body_exited"]
